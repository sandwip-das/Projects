{% load core_tags %}
<!-- Reviews Section -->
<section id="reviews"
    class="py-10 bg-gradient-to-r from-[#1a1a2e] via-[#2e1a3d] to-[#4a3526] border-t border-white/10 relative overflow-hidden">
    <div class="max-w-7xl mx-auto px-8 sm:px-12 lg:px-16 relative z-10">
        <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-6">
            <div>
                <h2 class="text-3xl font-bold text-white mb-2">Client <span class="text-primary">Reviews</span></h2>
                <div class="w-20 h-1 bg-gradient-to-r from-primary to-secondary rounded-full"></div>
            </div>
            <button onclick="openReviewModal()"
                class="px-6 py-2 bg-white/10 hover:bg-white/20 border border-white/20 rounded-full text-white font-medium transition-all duration-300 flex items-center gap-2">
                <i class="fas fa-star text-green-500"></i> Write a Review
            </button>
        </div>

        {% if reviews %}
        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4">
            {% for review in reviews %}
            <div class="group relative">
                <div class="relative rounded-2xl p-4 w-full h-full flex flex-col items-center text-center border border-white/10 transition-all duration-500 hover:-translate-y-2 hover:shadow-xl backdrop-blur-sm"
                    style="background: linear-gradient(135deg, rgba(135, 206, 235, 0.08), rgba(0, 191, 255, 0.04));"
                    onmouseover="this.style.borderColor='rgba(249, 115, 22, 0.9)'; this.style.boxShadow='0 10px 30px rgba(249, 115, 22, 0.3)';"
                    onmouseout="this.style.borderColor='rgba(255, 255, 255, 0.1)'; this.style.boxShadow='none';">

                    <!-- Reviewer Picture -->
                    <div
                        class="w-14 h-14 mb-3 rounded-full flex items-center justify-center group-hover:scale-110 transition duration-300 overflow-hidden shrink-0 border-2 border-primary/20 bg-gray-800">
                        {% if review.picture %}
                        <img src="{{ review.picture.url }}" alt="{{ review.name }}" class="w-full h-full object-cover">
                        {% else %}
                        <span class="text-xl font-bold text-white">{{ review.name|slice:":1" }}</span>
                        {% endif %}
                    </div>

                    <!-- Reviewer Info -->
                    <h4 class="text-sm font-bold text-white mb-1 group-hover:text-primary transition duration-300">
                        {{ review.name }}
                    </h4>

                    <p class="text-[10px] text-gray-400 mb-2 truncate w-full px-2">
                        {% if review.profession %}{{ review.profession }}{% endif %}
                        {% if review.profession and review.location %} | {% endif %}
                        {% if review.location %}{{ review.location }}{% endif %}
                    </p>

                    <!-- Rating Stars -->
                    <div class="flex text-green-500 text-[10px] mb-3">
                        {% with ''|center:5 as range %}
                        {% for _ in range %}
                        {% if forloop.counter <= review.rating %} <i class="fas fa-star"></i>
                            {% else %}
                            <i class="far fa-star text-gray-600"></i>
                            {% endif %}
                            {% endfor %}
                            {% endwith %}
                    </div>

                    <!-- Comment -->
                    <p class="text-[11px] text-gray-300 italic leading-relaxed line-clamp-4">
                        "{{ review.comment }}"
                    </p>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-12 text-gray-500 bg-white/5 rounded-2xl border border-white/10 border-dashed">
            <p>No reviews yet. Be the first to share your experience!</p>
        </div>
        {% endif %}
    </div>
</section>

<style>
    @keyframes scroll {
        0% {
            transform: translateX(0);
        }

        100% {
            transform: translateX(-50%);
        }
    }

    .animate-scroll {
        animation: scroll 30s linear infinite;
    }

    .hover\:pause-animation:hover {
        animation-play-state: paused;
    }
</style>